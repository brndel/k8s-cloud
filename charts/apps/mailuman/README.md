# Mail-Stack README

## Setting the ARC domain record

1. Extract the PEM certificate (generated by cert-manager) from this secret:

   ```yaml
   namespace: <MAIL-STACK NAMESPACE>
   name: mailman-arc
   key: tls.crt
   ````

2. Extract this certificate's public key via some tool, for example <https://report-uri.com/home/pem_decoder/>.
3. Remove all newlines from the public key PEM text (if any).
4. Insert the public key (just the base64 **without** `-----BEGIN PUBLIC KEY-----` and `-----END PUBLIC KEY-----`) into this TXT template:

   ```plain
   v=DKIM1; k=rsa; p=<PUBLIC KEY BASE64>
   ```

5. Add this text as a TXT DNS record for the domain `arc._domainkey.<MAILMAN DOMAIN>`, where `<MAILMAN DOMAIN>` is the value of `hosts.mailman` as defined in `values.yaml`.
